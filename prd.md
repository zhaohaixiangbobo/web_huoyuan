# ğŸš€ ç³»ç»Ÿè®¾è®¡æ–‡æ¡£ - å·çƒŸè´§æºåˆ†é…å‰åç«¯å¹³å°

æˆ‘åœ¨æœ¬åœ°å·²ç»å®ç°ä¸€ä¸ªè´§æºåˆ†é…ç®—æ³•ï¼Œ æˆ‘æƒ³å®ç°ä¸€ä¸ªå‰ç«¯çš„å·¥ä½œï¼Œ
constraint_manageræ˜¯çº¦æŸéªŒè¯çš„æ–‡ä»¶
data_loaderæ˜¯æ•°æ®åŠ è½½çš„é€»è¾‘
linear_programmingæ˜¯ç›¸å…³ç®—æ³•çš„é€»è¾‘
è¿™å‡ ä¸ªæ–‡ä»¶ä¿ç•™çš„åŸºç¡€ä¸Šï¼Œæ ¹æ®ä»–ä»¬çš„é€»è¾‘å¸®æˆ‘é‡æ–°æ ¹æ®fastapiè®¾è®¡ä¸€ä¸ªåç«¯æœåŠ¡åœ¨backendç›®å½•ä¸‹ï¼Œä¾è¿™ä¸‰ä¸ªæ–‡ä»¶çš„é€»è¾‘è®¾è®¡ä¸€ä¸ªapi
å‰ç«¯å®ç°åœ¨frontend æ–‡ä»¶ä¸‹



## ğŸ“Œ ä¸€ã€ç³»ç»Ÿç›®æ ‡



æ„å»ºä¸€ä¸ªç”¨æˆ·å‹å¥½çš„ Web å¹³å°ï¼Œæ”¯æŒï¼š
- ä¸Šä¼  Excel æ•°æ®ï¼›
- é€‰æ‹©çº¦æŸæ¡ä»¶å’Œç›®æ ‡å‡½æ•°ï¼›
- æäº¤è®¡ç®—ä»»åŠ¡ï¼›
- å±•ç¤ºç»“æœï¼ˆåˆ†è½®åˆ†é…è¡¨ã€çº¦æŸæ ¡éªŒï¼‰ï¼›
- æ”¯æŒå¯¼å‡ºç»“æœæˆ–ç»“æœå›¾è¡¨ã€‚

## ğŸ§± äºŒã€æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯/æ¡†æ¶       | è¯´æ˜                         |
|------|------------------|------------------------------|
| å‰ç«¯ | React+Ant Design Pro  | UI æ¡†æ¶         |
| åç«¯ | FastAPI          |  APIæœåŠ¡             |
| æ•°æ® | pandas + pulp    | æ•°æ®å¤„ç†ä¸çº¿æ€§è§„åˆ’è®¡ç®—       |

## ğŸ–¥ ä¸‰ã€ç³»ç»Ÿæ¨¡å—åˆ’åˆ†
ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªtab
### 1. é¦–é¡µ - Excel å¯¼å…¥ä¸è®¡ç®—é…ç½®

#### ğŸ“„ ä¸»è¦åŠŸèƒ½
- ä¸Šä¼  Excel æ–‡ä»¶ï¼ˆSheet1/Sheet2ï¼‰  å¯¼å…¥çš„æ ·å¼åœ¨huoyuanfenpei.xlsxé‡Œ
- åŠ¨æ€è§£æè½®æ¬¡
- é…ç½®çº¦æŸï¼ˆsolveé‡Œï¼‰  ç›¸å…³çš„å‚æ•°æå‡ºå‡ºæ¥ä¹Ÿåšé…ç½® æ¯”å¦‚æŠ•æ”¾æ€»é‡çš„å€¼å¯ä»¥è‡ªå·±é€‰  å•ç®±å‡ä»·çš„ä¸Šä¸‹é™
        # æ·»åŠ åŸºæœ¬çº¦æŸ
        self.add_demand_constraints(self.model, self.variables)  # çº¦æŸ1ï¼šéœ€æ±‚æ»¡è¶³
        self.add_volume_constraints(self.model, self.variables)  # çº¦æŸ3ï¼šæŠ•æ”¾æ€»é‡
        self.add_average_price_constraints(self.model, self.variables)  # çº¦æŸ2ï¼šå•ç®±å‡ä»·
        
        # æ·»åŠ åˆ†é…ç­–ç•¥çº¦æŸ
        self.add_demand_split_constraints(self.model, self.variables)  # çº¦æŸ6ï¼šéœ€æ±‚é‡åˆ†è½®ï¼ˆä»…éexisting_allocationsï¼‰
        self.add_demand_based_constraints(self.model, self.variables)  # çº¦æŸ8ï¼šæŒ‰éœ€ä¼˜å…ˆï¼ˆè½¯çº¦æŸï¼‰
        self.add_price_based_constraints(self.model, self.variables)  # çº¦æŸ9ï¼šæŒ‰ä»·æ¯”ä¾‹
        
        # æ·»åŠ Cç±»çƒŸçº¦æŸ
        self.add_c_type_constraints(self.model, self.variables)  # çº¦æŸ10.1-10.2
        self._add_c_subtype_constraints(self.model, self.variables)  # çº¦æŸ10.3-10.5
        
        # æ·»åŠ å‡è¡¡çº¦æŸ
        self.add_balance_constraints(self.model, self.variables)  # çº¦æŸ11ï¼šåˆ†é…å‡è¡¡ï¼ˆè½¯çº¦æŸï¼‰
- é…ç½®ç›®æ ‡å‡½æ•°ï¼ˆcreate_objective_functioné‡Œï¼‰
- ç‚¹å‡»æŒ‰é’®æäº¤è®¡ç®—ä»»åŠ¡

#### ğŸ§© å‰ç«¯è®¾è®¡

| å…ƒç´             | è¯´æ˜                                 |
|----------------|--------------------------------------|
| Upload ç»„ä»¶    | ä¸Šä¼  `.xlsx` æ–‡ä»¶                    |
| Form + Select  | ç”¨äºè®¾ç½®çº¦æŸé€‰é¡¹å¼€å…³                 |
| Form + Switch  | ç›®æ ‡å‡½æ•°é…ç½®é€‰é¡¹                     |
| Button         | å¼€å§‹è®¡ç®—                             |
| Spin/Loading   | è®¡ç®—ä¸­çŠ¶æ€æç¤º                       |
æˆåŠŸåæç¤ºå»åˆ†é…æ˜ç»†æŸ¥çœ‹ & å¯¼å‡ºé¡µé¢æŸ¥çœ‹


### 2. åˆ†é…æ˜ç»†æŸ¥çœ‹ & å¯¼å‡º
oupput4å°±æ˜¯linear_programing ç”Ÿæˆç»“æœä¸­çš„result['allocation_matrix']
#### ğŸ“„ ä¸»è¦åŠŸèƒ½
- å…¨é‡å¯¼å‡ºæœ€ç»ˆè®¡ç®—ç»“æœ å¯¼å‡ºçš„æ ·å¼åœ¨output4.xlsxé‡Œ  
- å±•ç¤ºåˆ†é…ç»“æœï¼Œæ ·å¼output4.xlsxé‡Œ
- åˆ†é…çŠ¶æ€ æ˜¯å¦æœ‰æœ€ä¼˜è§£ æ±‚è§£æ—¶é—´ç­‰å¯ä»¥çœ‹æƒ…å†µå±•ç¤º  

#### ğŸ§© å‰ç«¯è®¾è®¡

| å…ƒç´        | è¯´æ˜                             |
|------------|----------------------------------|
| Table      |   |
| Button     | å¯¼å‡ºä¸º Excel æˆ– CSV              |

---



### 3. è®¡ç®—ç»“æœé¡µé¢

#### ğŸ“„ ä¸»è¦åŠŸèƒ½
- å±•ç¤ºæŒ‰å“è§„çš„æŠ•æ”¾æ±‡æ€»ä¿¡æ¯  æ ·å¼æŒ‰ç…§output4.xlsx
- å±•ç¤ºæ˜¯å¦æ»¡è¶³çº¦æŸï¼ˆå¯è§†åŒ–/è¡¨æ ¼ï¼‰ æ ¹æ®constraint_manageréªŒè¯çš„è¿”å›ä¿¡æ¯

#### ğŸ§© å‰ç«¯è®¾è®¡

| å…ƒç´                  | è¯´æ˜                                       |
|----------------------|--------------------------------------------|
| Table                | æŒ‰å“è§„çš„æŠ•æ”¾æ±‡æ€»ä¿¡æ¯è¡¨                       |
|                      | å±•ç¤ºå„ç±»çº¦æŸæ˜¯å¦æ»¡è¶³                       |

---

## ğŸ§© å››ã€åç«¯æ¥å£è®¾è®¡ï¼ˆFastAPIï¼‰

### âœ… æ¥å£åˆ—è¡¨

| æ¥å£è·¯å¾„            | æ–¹æ³• | è¯´æ˜                        |
|---------------------|------|-----------------------------|
| `/upload/`          | POST | ä¸Šä¼  Excelï¼Œè¿”å›è§£æä¿¡æ¯    |
| `/solve/`           | POST | ä¼ å…¥è®¡ç®—é…ç½®ï¼Œè¿”å›è®¡ç®—ç»“æœ  |
| `/result/`          | GET  | è·å–ä¸Šä¸€æ¬¡è®¡ç®—çš„è¯¦ç»†ç»“æœ    |
| `/export/`          | GET  | å¯¼å‡ºå½“å‰ç»“æœä¸º Excel/CSV    |
| `/constraints/`     | GET  | è·å–å½“å‰çº¦æŸçš„éªŒè¯ç»“æœ      |


